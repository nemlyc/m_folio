# 江戸川乱歩邸 3D（研究開発）

## 作品概要

研究室内での、現実世界のデジタルアーカイブを行うプロジェクトに関連して、3d スキャンした現実世界の建物をモデルとして利用し、建物に由来するクイズを 3d 空間内で楽しむゲームを作成しました。<br>
大衆的な利用を想定して WebGL 環境で作成し、インストール不要のタブレットブラウザでの動作もサポートできるよう、LOD を活用し負荷の調整を行いました。

## 成果

- デプロイ先
  - https://cpslab.github.io/RampoQuizApp
- デモ動画

<iframe src="https://drive.google.com/file/d/1k35wufTdoyisutr6vBGYYY8kVEbuPzid/preview" width="560" height="315" allow="autoplay"></iframe>

## 開発背景

歴史的建造物に関して、老朽化に伴う管理費の増加や焼失などを理由とする登録文化財の解体が生じています。<br>
立教大学が管理する、江戸川乱歩邸においても老朽化に伴う取り壊し等が検討されて初めている段階でした。<br>
そこで、歴史的建造物が持つデータ群のデジタルアーカイブを行い、オープン化を検討する取り組みを行いました。<br>
私は、江戸川乱歩邸の 3D スキャンとその活用方法を検討するという部分で関わりました。

## 操作方法

![](img/edogawa_sousa.png)

## 開発期間

2021 年 10 月～ 2022 年 2 月

## 開発環境

Unity（WebGL）

### 使用ライブラリ

- UniRx

<!-- ## 開発メンバーと担当範囲 -->

## 技術的ポイント

- Addressableで建物の壁に表示する画像データの非同期読み込みを行っています。
  - アプリ起動時に読み込み → シーン読み込み → アプリ本編起動（起動シーンのアンロード）
  - 壁画像データは高解像度のものが多いため、通常起動時には読み込みに時間がかかってしまっていたため。
- InputSystemを用いて多数デバイスをサポートしています。
  - ゲームパッド
  - キーボードマウス
  - タッチパネル操作。タブレットブラウザを想定（モバイルブラウザは動作不可）
- InputSystemが提供するインタフェースを複数実装し、操作系統を切り替えて、アドベンチャーパート・オブジェクト操作パートでプレイヤーの入力を別スクリプトで動的に管理しています。
  - アドベンチャーパート：スティックでプレイヤーが移動。特定オブジェクトに向けてクリックでイベント発火。
  - オブジェクト操作パート：オブジェクトを拡大表示している時、マウスのドラッグでオブジェクトを回転させる。
- 外部ライブラリ使用でエクセルでマスターデータ管理、クイズデータはエディタ拡張で選択したものをエディタ上で確認可能となっています。
  - クイズデータは第三者と共有しやすいよう、エクセルデータで入力できるようにしました。
  - 生成されるScriptableObjectの内容を確認しやすくするため、エディタ拡張を作成し、クイズ編集時にエディタに内容が表示されるようにしました。
  - .<!--スクショ。クイズインデックス1と2等-->
- オブジェクトのプレビュー機能とクイズのトリガーはIInteractableインタフェースを用いて実装しました。インタラクションはプレイヤーと疎結合になっています。
  - プレビュー機能
- 建物は簡易的にLODを設定し、ブラウザ上での負荷の軽減に寄与

<!-- ## 展望 -->
